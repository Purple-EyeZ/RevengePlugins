(function(exports,metro,patcher,plugin,storage,assets,common){"use strict";var{TableRowGroup,TableSwitchRow,TableRowIcon,Stack}=common.components,{ScrollView}=common.ReactNative,settings=[{label:"Messages",subLabel:"Deletes messages without confirmation",icon:"ForumIcon",value:"autoConfirmMessage"},{label:"Embeds",subLabel:"Deletes embeds without confirmation",icon:"EmbedIcon",value:"autoConfirmEmbed"}];function Settings(){return storage.useProxy(plugin.storage),React.createElement(ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Stack,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},TableRowGroup&&React.createElement(TableRowGroup,{title:"Settings"},settings.map(({label,subLabel,icon,value})=>TableSwitchRow&&React.createElement(TableSwitchRow,{key:value,label,subLabel,icon:TableRowIcon?React.createElement(TableRowIcon,{source:assets.getAssetIDByName(icon)}):null,value:plugin.storage[value],onValueChange:v=>plugin.storage[value]=v})))))}var{intl,t:intlMap}=metro.findByProps("intl"),KEYS={message:{hash:"AMvpS0",storage:"autoConfirmMessage",default:!0},embed:{hash:"vXZ+Fh",storage:"autoConfirmEmbed",default:!0}},autoConfirmMessages={embed:intl.string(intlMap[KEYS.embed.hash]),message:intl.string(intlMap[KEYS.message.hash])},unpatch,index={onLoad:()=>{var _a;for(var{storage:key,default:value}of Object.values(KEYS))(_a=plugin.storage)[key]??(_a[key]=value);var Popup=metro.findByProps("show","openLazy");Popup&&(unpatch=patcher.instead("show",Popup,(args,fn)=>{var text=[args?.[0]?.children?.props?.title?.trim(),args?.[0]?.body?.trim()],shouldConfirm=type=>plugin.storage[KEYS[type].storage]&&text.includes(autoConfirmMessages[type]);return shouldConfirm("message")||shouldConfirm("embed")?args?.[0]?.onConfirm?.():fn(...args)}))},onUnload:()=>unpatch?.(),settings:Settings};return exports.default=index,Object.defineProperty(exports,"__esModule",{value:!0}),exports})({},vendetta.metro,vendetta.patcher,vendetta.plugin,vendetta.storage,vendetta.ui.assets,bunny.metro.common);
